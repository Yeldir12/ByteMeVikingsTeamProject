<input id="user" placeholder="username">
<input id="pass" placeholder="password" type="password">
<button onclick="login()">Login</button>

<script>
async function login() {
    const username = document.getElementById("user").value;
    const password = document.getElementById("pass").value;

    const res = await fetch("http://localhost:3000/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, password })
    });

    const data = await res.json();

    if (data.token) {
        localStorage.setItem("token", data.token);
        alert("Logged in!");
    } else {
        alert("Error logging in");
    }
}
const token = localStorage.getItem("token");

fetch("http://localhost:3000/protected", {
    headers: { Authorization: "Bearer " + token }
})
.then(r => r.json())
.then(console.log);

</script>


